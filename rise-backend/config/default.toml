[server]
host = "0.0.0.0"
port = 3000
public_url = "http://localhost:3000"
api_domain = "localhost:3000"
cookie_domain = ""  # Empty = current host only (good for localhost)
cookie_secure = false  # Set to true for HTTPS in production

[auth]
issuer = "http://localhost:5556/dex"
client_id = "rise-backend"
client_secret = "rise-backend-secret"
# List of admin user emails (have full permissions on all resources)
admin_users = ["admin@example.com"]

[database]
url = "postgres://rise:rise123@localhost:5432/rise"

# Controller loop intervals (in seconds) - optional, all have defaults
[controller]
# How often to check for deployments to reconcile (default: 5)
# reconcile_interval_secs = 5
# How often to perform health checks on active deployments (default: 5)
# health_check_interval_secs = 5
# How often to process terminating deployments (default: 5)
# termination_interval_secs = 5
# How often to process cancelling deployments (default: 5)
# cancellation_interval_secs = 5
# How often to check for expired deployments (default: 60)
# expiration_interval_secs = 60
# How often to refresh Kubernetes image pull secrets (default: 3600)
# secret_refresh_interval_secs = 3600

# Container registry configuration (optional)
# Uncomment and configure ONE of the following registry providers:

# AWS ECR Example:
# [registry]
# type = "ecr"
# region = "us-east-1"
# account_id = "123456789012"
# access_key_id = "AKIAIOSFODNN7EXAMPLE"  # Optional: static credentials (use IAM role in production)
# secret_access_key = "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"
# repo_prefix = "rise/"
# role_arn = "arn:aws:iam::123456789012:policy/rise-ecr-controller"
# push_role_arn = "arn:aws:iam::123456789012:role/rise-ecr-push"
# auto_remove = true

# OCI registry for local development (client-side auth via docker login)
[registry]
type = "oci-client-auth"
registry_url = "localhost:5000"
namespace = "rise-apps"

# Kubernetes configuration (optional)
# Uncomment to enable Kubernetes deployment controller
# [kubernetes]
# ingress_class = "nginx"
# domain_suffix = "apps.rise.net"
# auth_backend_url = "http://172.17.0.1:3000"  # URL for Nginx auth subrequests (172.17.0.1 is Docker bridge IP for Minikube to reach host)
# auth_signin_url = "http://localhost:3000"  # Full URL with schema for auth signin redirects (use http:// for development, https:// for production)
# kubeconfig = "/path/to/kubeconfig"  # Optional: explicit kubeconfig path
